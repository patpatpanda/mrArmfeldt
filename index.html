<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>C# – Syntaxexempel (komplett översikt)</title>
  <!-- Din egen CSS -->
  <link rel="stylesheet" href="styles.css" />
  <!-- (Valfritt) Prism för highlighting; ta bort om du inte vill ha CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism.css">
  <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-core.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1/plugins/autoloader/prism-autoloader.min.js" data-autoloader-path="https://cdn.jsdelivr.net/npm/prismjs@1/components/"></script>
  <style>
    /* Minimal fallback om du inte använder styles.css */
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;line-height:1.6;margin:0}
    header{position:sticky;top:0;background:#111;color:#fff;padding:1rem;border-bottom:1px solid #333;z-index:10}
    main{padding:1rem;max-width:1100px;margin:0 auto}
    nav.toc{background:#f6f6f9;border:1px solid #e1e1ea;padding:1rem;border-radius:12px}
    nav.toc a{display:block;margin:.25rem 0}
    section{margin:2.25rem 0}
    section h2{margin:.2rem 0 1rem}
    pre{overflow:auto;border:1px solid #e5e7eb;border-radius:12px;padding:1rem;background:#0b1020;color:#e6eaff}
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,Monaco,monospace}
    .tip{background:#eefdf3;border-left:4px solid #22c55e;padding:.75rem 1rem;border-radius:8px}
    .warn{background:#fff7ed;border-left:4px solid #f97316;padding:.75rem 1rem;border-radius:8px}
    .grid{display:grid;gap:1rem}
    @media(min-width:900px){.grid.cols-2{grid-template-columns:1fr 1fr}}
    .small{font-size:.9rem;color:#475569}
    footer{margin:3rem 0;padding:2rem 0;border-top:1px dashed #e5e7eb;color:#475569}
  </style>
</head>
<body>
  <header>
    <h1>C# – syntaxexempel, från grunder till moderna features</h1>
    <p class="small">Den här sidan samlar små, fristående kodsnuttar som illustrerar syntax. Exempelkoden är i huvudsak C# 10–12-kompatibel.</p>
  </header>

  <main>
    <nav class="toc">
      <strong>Innehåll</strong>
      <a href="#hello">Hello World & Program-top-level</a>
      <a href="#types">Typer & variabler</a>
      <a href="#operators">Operatorer</a>
      <a href="#flow">Flödesstyrning</a>
      <a href="#pattern">Pattern matching</a>
      <a href="#methods">Metoder & parametrar</a>
      <a href="#tuples">Tupler</a>
      <a href="#records">Records</a>
      <a href="#classes">Klasser, struct, enum, interface</a>
      <a href="#inheritance">Arv, abstrakt, sealed, virtual/override</a>
      <a href="#generics">Generics & constraints</a>
      <a href="#linq">LINQ-uttryck</a>
      <a href="#delegates">Delegater, events & lambdauttryck</a>
      <a href="#async">Async/await & Task</a>
      <a href="#exceptions">Exceptions & using</a>
      <a href="#filespan">Span/stackalloc & ranges</a>
      <a href="#attributes">Attribut & reflektion</a>
      <a href="#nullable">Nullable reference types</a>
      <a href="#switch-expr">Switch-uttryck (expression)</a>
      <a href="#primary-ctors">Primary constructors</a>
      <a href="#collection-expr">Collection expressions</a>
      <a href="#unsafe">Unsafe & fixed</a>
    </nav>

    <section id="hello">
      <h2>Hello World & top-level statements</h2>
      <pre><code class="language-cs">// Top-level statements (Program.cs)
Console.WriteLine("Hej världen!");

// Argument parsing
if (args.Length &gt; 0)
    Console.WriteLine($"Första argumentet: {args[0]}");

// Lokala funktioner i top-level
int Kvadrat(int x) =&gt; x * x;
Console.WriteLine(Kvadrat(4));
</code></pre>
    </section>

    <section id="types">
      <h2>Typer & variabler</h2>
      <div class="grid cols-2">
        <div>
<pre><code class="language-cs">// Value types
int i = 42;
long l = 42L;
double d = 3.14;
decimal m = 19.95m;
bool b = true;
char c = 'å';
DateTime now = DateTime.Now;

// Reference types
string s = "hej";
object o = new object();
int[] arr = { 1, 2, 3 };
List&lt;string&gt; list = new(); // target-typed new
</code></pre>
        </div>
        <div>
<pre><code class="language-cs">// var & explicit typ
var name = "Ada";           // infererad: string
(string förnamn, string efternamn) person = ("Ada", "Lovelace");

// konstanta & readonly
const double Pi = Math.PI;
readonly struct Meter
{
    public readonly double Value;
    public Meter(double v) =&gt; Value = v;
}
</code></pre>
        </div>
      </div>
    </section>

    <section id="operators">
      <h2>Operatorer</h2>
<pre><code class="language-cs">// Aritmetik, jämförelse, logik
int a = 5 + 2 * 3; // 11
bool eq = (2 + 2) == 4;
bool log = true &amp;&amp; !false;

// Null-coalescing, null-propagation
string? maybe = null;
string text = maybe ?? "fallback";
int? len = maybe?.Length;

// Range & index
int[] xs = { 0,1,2,3,4,5 };
int last = xs[^1];      // 5
int[] middle = xs[2..5]; // {2,3,4}
</code></pre>
    </section>

    <section id="flow">
      <h2>Flödesstyrning</h2>
      <div class="grid cols-2">
        <div>
<pre><code class="language-cs">// if/else, switch
if (a &gt; 10) { /* ... */ }
else if (a == 10) { /* ... */ }
else { /* ... */ }

switch (a)
{
    case &lt; 0:
        Console.WriteLine("negativt");
        break;
    case 0:
        Console.WriteLine("noll");
        break;
    default:
        Console.WriteLine("positivt");
        break;
}
</code></pre>
        </div>
        <div>
<pre><code class="language-cs">// loopar
for (int k = 0; k &lt; 3; k++) Console.WriteLine(k);

int j = 0;
while (j &lt; 3) j++;

do { j--; } while (j &gt; 0);

foreach (var x in xs) Console.WriteLine(x);
</code></pre>
        </div>
      </div>
    </section>

    <section id="pattern">
      <h2>Pattern matching</h2>
<pre><code class="language-cs">object obj = 42;
if (obj is int n &amp;&amp; n is &gt; 0 and &lt; 100)
{
    Console.WriteLine($"n={n}");
}

static string Beskriv(object? x) =&gt; x switch
{
    null =&gt; "(null)",
    int { } i when i % 2 == 0 =&gt; $"jämn int {i}",
    string { Length: &gt; 5 } s =&gt; $"lång str '{s}'",
    IEnumerable&lt;int&gt; { } seq =&gt; $"sekvens med {seq.Count()} ints",
    _ =&gt; $"okänd typ {x.GetType().Name}"
};
</code></pre>
    </section>

    <section id="methods">
      <h2>Metoder & parametrar</h2>
      <div class="grid cols-2">
        <div>
<pre><code class="language-cs">// Vanliga, överlagring, defaultvärden
static int Add(int x, int y = 0) =&gt; x + y;

// params, ref, in, out
static int Sum(params int[] values) =&gt; values.Sum();
static void Double(ref int x) =&gt; x *= 2;
static int Length(in ReadOnlySpan&lt;char&gt; s) =&gt; s.Length;
static bool TryParseInt(string s, out int value)
    =&gt; int.TryParse(s, out value);
</code></pre>
        </div>
        <div>
<pre><code class="language-cs">// Lokala funktioner & expression-bodied medlemmar
static int Fib(int n)
{
    int F(int k) =&gt; k switch { 0 =&gt; 0, 1 =&gt; 1, _ =&gt; F(k-1)+F(k-2)};
    return F(n);
}

// Extension methods
public static class StringExt
{
    public static bool IsNullOrWhiteSpace(this string? s)
        =&gt; string.IsNullOrWhiteSpace(s);
}
</code></pre>
        </div>
      </div>
    </section>

    <section id="tuples">
      <h2>Tupler</h2>
<pre><code class="language-cs">(int X, int Y) p = (10, 20);
var (x, y) = p; // deconstruction

// Metod som returnerar tuple
static (bool ok, int value) TryGet() =&gt; (true, 123);
var (ok, value) = TryGet();
</code></pre>
    </section>

    <section id="records">
      <h2>Records</h2>
<pre><code class="language-cs">// Immutable med värdebasad likhet
public record Person(string Förnamn, string Efternamn);

var a1 = new Person("Ada", "Lovelace");
var a2 = a1 with { Efternamn = "King" };

// Record class/struct
public readonly record struct Punkt(int X, int Y);
</code></pre>
    </section>

    <section id="classes">
      <h2>Klasser, struct, enum, interface</h2>
      <div class="grid cols-2">
        <div>
<pre><code class="language-cs">public class Konto
{
    // Auto-implemented & init-only setters
    public string Ägare { get; init; } = "Okänd";
    public decimal Saldo { get; private set; }

    public Konto(string ägare, decimal start) =&gt; (Ägare, Saldo) = (ägare, start);

    // Properties med body
    public bool ÄrPlus =&gt; Saldo &gt;= 0m;

    // Indexer
    private readonly Dictionary&lt;string, string&gt; meta = new();
    public string this[string key]
    {
        get =&gt; meta.TryGetValue(key, out var v) ? v : "";
        set =&gt; meta[key] = value;
    }
}
</code></pre>
        </div>
        <div>
<pre><code class="language-cs">public struct Koordinat { public int X; public int Y; }

public enum Färg { Röd, Grön, Blå }

public interface ILog
{
    void Info(string msg);
}

public sealed class ConsoleLog : ILog
{
    public void Info(string msg) =&gt; Console.WriteLine(msg);
}
</code></pre>
        </div>
      </div>
    </section>

    <section id="inheritance">
      <h2>Arv, abstrakt, sealed, virtual/override</h2>
<pre><code class="language-cs">public abstract class Form
{
    public abstract double Area();
    public virtual string Namn =&gt; GetType().Name;
}

public class Rektangel : Form
{
    public double B { get; }
    public double H { get; }
    public Rektangel(double b, double h) =&gt; (B,H) = (b,h);
    public override double Area() =&gt; B * H;
}

public sealed class Cirkel : Form
{
    public double R { get; }
    public Cirkel(double r) =&gt; R = r;
    public override double Area() =&gt; Math.PI * R * R;
}
</code></pre>
    </section>

    <section id="generics">
      <h2>Generics & constraints</h2>
<pre><code class="language-cs">public class Repo&lt;T&gt; where T : class, new()
{
    private readonly List&lt;T&gt; _items = new();
    public void Add(T item) =&gt; _items.Add(item);
    public IEnumerable&lt;T&gt; All() =&gt; _items;
}

// Generic method med constraints
static T Max&lt;T&gt;(T a, T b) where T : IComparable&lt;T&gt;
    =&gt; a.CompareTo(b) &gt; 0 ? a : b;
</code></pre>
    </section>

    <section id="linq">
      <h2>LINQ</h2>
<pre><code class="language-cs">var data = new[] { 1,2,3,4,5,6 };
var q = data.Where(x =&gt; x % 2 == 0)
           .Select(x =&gt; new { x, kv = x * x })
           .OrderByDescending(t =&gt; t.kv);

// Query-syntax
var q2 = from x in data
         where x % 2 == 1
         select (x, Kub: x*x*x);
</code></pre>
    </section>

    <section id="delegates">
      <h2>Delegater, events & lambdas</h2>
<pre><code class="language-cs">public delegate int Beräkna(int x, int y);

class Räknare
{
    public event Action? Tick;
    public void Kör() { Tick?.Invoke(); }
}

var add = (int x, int y) =&gt; x + y;        // lambda med typade parametrar
Func&lt;int,int,int&gt; mul = (x,y) =&gt; x*y;    // Func/Action delegates

var r = new Räknare();
r.Tick += () =&gt; Console.WriteLine("tick");
r.Kör();
</code></pre>
    </section>

    <section id="async">
      <h2>Async/await & Task</h2>
<pre><code class="language-cs">static async Task&lt;string&gt; HämtaAsync(HttpClient http, string url)
{
    using var resp = await http.GetAsync(url);
    resp.EnsureSuccessStatusCode();
    return await resp.Content.ReadAsStringAsync();
}

// Parallelisering
var urls = new[] { "https://example.com", "https://example.org" };
var http = new HttpClient();
var tasks = urls.Select(u =&gt; HämtaAsync(http, u));
string[] innehåll = await Task.WhenAll(tasks);
</code></pre>
    </section>

    <section id="exceptions">
      <h2>Exceptions, using, try/catch/finally</h2>
      <div class="grid cols-2">
        <div>
<pre><code class="language-cs">try
{
    throw new InvalidOperationException("något gick fel");
}
catch (InvalidOperationException ex) when (ex.Message.Contains("fel"))
{
    Console.WriteLine(ex.Message);
}
finally
{
    Console.WriteLine("städar upp");
}
</code></pre>
        </div>
        <div>
<pre><code class="language-cs">// using declaration (C# 8+)
using var fs = File.OpenRead("data.bin");
Span&lt;byte&gt; buff = stackalloc byte[16];
fs.Read(buff);
</code></pre>
        </div>
      </div>
    </section>

    <section id="filespan">
      <h2>Span/stackalloc & ranges</h2>
<pre><code class="language-cs">Span&lt;int&gt; s = stackalloc int[5];
for (int i2 = 0; i2 &lt; s.Length; i2++) s[i2] = i2;
ReadOnlySpan&lt;int&gt; s2 = s[1..^1]; // slice

ReadOnlySpan&lt;byte&gt; utf8 = "Hej"u8; // UTF-8 string literal (C# 11)
</code></pre>
    </section>

    <section id="attributes">
      <h2>Attribut & reflektion</h2>
<pre><code class="language-cs">[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public sealed class ExampleAttribute : Attribute
{
    public string? Info { get; init; }
}

[Example(Info = "meta")] class Demo { }

// Reflektion
var t = typeof(Demo);
var hasAttr = t.GetCustomAttributes(typeof(ExampleAttribute), inherit:true).Any();
</code></pre>
    </section>

    <section id="nullable">
      <h2>Nullable reference types</h2>
<pre><code class="language-cs">#nullable enable
string? kanVaraNull = null;
string aldrigNull = "text";

// null-kontroll
if (kanVaraNull is not null)
{
    Console.WriteLine(kanVaraNull.Length);
}
#nullable restore
</code></pre>
    </section>

    <section id="switch-expr">
      <h2>Switch-uttryck (expression)</h2>
<pre><code class="language-cs">static string Betyg(int poäng) =&gt; poäng switch
{
    &gt;= 90 =&gt; "A",
    &gt;= 80 =&gt; "B",
    &gt;= 70 =&gt; "C",
    &gt;= 60 =&gt; "D",
    _ =&gt; "F"
};
</code></pre>
    </section>

    <section id="primary-ctors">
      <h2>Primary constructors (C# 12)</h2>
<pre><code class="language-cs">public class Logg(string kategori, TextWriter writer)
{
    public void Info(string msg) =&gt; writer.WriteLine($"[{kategori}] {msg}");
}

public readonly struct Box(int w, int h)
{
    public int Area =&gt; w * h;
}
</code></pre>
    </section>

    <section id="collection-expr">
      <h2>Collection expressions (C# 12)</h2>
<pre><code class="language-cs">int[] arr1 = [1,2,3];
List&lt;int&gt; list2 = [..arr1, 4, 5];
Dictionary&lt;string,int&gt; dict =
[
    ["a"] = 1,
    ["b"] = 2
];
</code></pre>
    </section>

    <section id="unsafe">
      <h2>Unsafe, pointers & fixed</h2>
      <div class="warn small">Kräver <code>/unsafe</code> i projektinställningar.</div>
<pre><code class="language-cs">unsafe
{
    int val = 123;
    int* p = &amp;val;
    *p = 456;
    Console.WriteLine(val);

    fixed (char* ps = "Hej")
    {
        // pekare till char-data
    }
}
</code></pre>
    </section>

    <footer>
      <p>Tips: Lägg gärna till fler block när du hittar nya språkfeatures. Håll koden kort och fristående per block för att visa just syntaxen.</p>
    </footer>
  </main>
</body>
</html>
